# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [High Issues](#high-issues)
  - [H-1: `abi.encodePacked()` should not be used with dynamic types when passing the result to a hash function such as `keccak256()`](#h-1-abiencodepacked-should-not-be-used-with-dynamic-types-when-passing-the-result-to-a-hash-function-such-as-keccak256)
  - [H-2: Unprotected initializer](#h-2-unprotected-initializer)
  - [H-3: Unsafe Casting](#h-3-unsafe-casting)
  - [H-4: Yul block contains `return` function call.](#h-4-yul-block-contains-return-function-call)
  - [H-5: Functions send eth away from contract but performs no checks on any address.](#h-5-functions-send-eth-away-from-contract-but-performs-no-checks-on-any-address)
  - [H-6: Contract locks Ether without a withdraw function.](#h-6-contract-locks-ether-without-a-withdraw-function)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk for trusted owners](#l-1-centralization-risk-for-trusted-owners)
  - [L-2: Missing checks for `address(0)` when assigning values to address state variables](#l-2-missing-checks-for-address0-when-assigning-values-to-address-state-variables)
  - [L-3: `public` functions not used internally could be marked `external`](#l-3-public-functions-not-used-internally-could-be-marked-external)
  - [L-4: Event is missing `indexed` fields](#l-4-event-is-missing-indexed-fields)
  - [L-5: Modifiers invoked only once can be shoe-horned into the function](#l-5-modifiers-invoked-only-once-can-be-shoe-horned-into-the-function)
  - [L-6: Unused Custom Error](#l-6-unused-custom-error)
  - [L-7: Dead Code](#l-7-dead-code)
  - [L-8: Costly operations inside loops.](#l-8-costly-operations-inside-loops)
  - [L-9: State variable changes but no event is emitted.](#l-9-state-variable-changes-but-no-event-is-emitted)
  - [L-10: State variable could be declared immutable](#l-10-state-variable-could-be-declared-immutable)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 12 |
| Total nSLOC | 2055 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| src/Distribution.sol | 100 |
| src/Relayer.sol | 448 |
| src/Staking.sol | 81 |
| src/VSkillUser.sol | 301 |
| src/VSkillUserNft.sol | 153 |
| src/Verifier.sol | 281 |
| src/interfaces/IAutomationRegistrar.sol | 26 |
| src/interfaces/IRelayer.sol | 47 |
| src/library/OracleLib.sol | 28 |
| src/library/PriceCoverter.sol | 33 |
| src/library/StructDefinition.sol | 30 |
| src/optimizedGas/RelayerYul.sol | 527 |
| **Total** | **2055** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 6 |
| Low | 10 |


# High Issues

## H-1: `abi.encodePacked()` should not be used with dynamic types when passing the result to a hash function such as `keccak256()`

Use `abi.encode()` instead which will pad items to 32 bytes, which will [prevent hash collisions](https://docs.soliditylang.org/en/v0.8.13/abi-spec.html#non-standard-packed-mode) (e.g. `abi.encodePacked(0x123,0x456)` => `0x123456` => `abi.encodePacked(0x1,0x23456)`, but `abi.encode(0x123,0x456)` => `0x0...1230...456`). Unless there is a compelling reason, `abi.encode` should be preferred. If there is only one argument to `abi.encodePacked()` it can often be cast to `bytes()` or `bytes32()` [instead](https://ethereum.stackexchange.com/questions/30912/how-to-compare-strings-in-solidity#answer-82739).
If all arguments are strings and or bytes, `bytes.concat()` should be used instead.

<details><summary>2 Found Instances</summary>


- Found in src/VSkillUserNft.sol [Line: 139](src/VSkillUserNft.sol#L139)

	```solidity
	                abi.encodePacked(
	```

- Found in src/VSkillUserNft.sol [Line: 143](src/VSkillUserNft.sol#L143)

	```solidity
	                            abi.encodePacked(
	```

</details>



## H-2: Unprotected initializer

Consider protecting the initializer functions with modifiers.

<details><summary>1 Found Instances</summary>


- Found in src/Staking.sol [Line: 122](src/Staking.sol#L122)

	```solidity
	    function getInitialReputation() external pure returns (uint256) {
	```

</details>



## H-3: Unsafe Casting

Downcasting int/uints in Solidity can be unsafe due to the potential for data loss and unintended behavior.When downcasting a larger integer type to a smaller one (e.g., uint256 to uint128), the value may exceed the range of the target type,leading to truncation and loss of significant digits. Use OpenZeppelin's SafeCast library to safely downcast integers.

<details><summary>1 Found Instances</summary>


- Found in src/Relayer.sol [Line: 468](src/Relayer.sol#L468)

	```solidity
	        return address(uint160(xorResult));
	```

</details>



## H-4: Yul block contains `return` function call.

Remove this, as this causes execution to halt. Nothing after that call will execute, including code following the assembly block.

<details><summary>1 Found Instances</summary>


- Found in src/optimizedGas/RelayerYul.sol [Line: 176](src/optimizedGas/RelayerYul.sol#L176)

	```solidity
	                return(0, 0)
	```

</details>



## H-5: Functions send eth away from contract but performs no checks on any address.

Consider introducing checks for `msg.sender` to ensure the recipient of the money is as intended.

<details><summary>3 Found Instances</summary>


- Found in src/VSkillUser.sol [Line: 268](src/VSkillUser.sol#L268)

	```solidity
	    function withdrawProfit() external onlyOwner onlyInitialized {
	```

- Found in src/Verifier.sol [Line: 184](src/Verifier.sol#L184)

	```solidity
	    function withdrawStakeAndLoseVerifier() public onlyInitialized {
	```

- Found in src/Verifier.sol [Line: 191](src/Verifier.sol#L191)

	```solidity
	    function withdrawReward() public onlyInitialized {
	```

</details>



## H-6: Contract locks Ether without a withdraw function.

It appears that the contract includes a payable function to accept Ether but lacks a corresponding function to withdraw it, which leads to the Ether being locked in the contract. To resolve this issue, please implement a public or external function that allows for the withdrawal of Ether from the contract.

<details><summary>1 Found Instances</summary>


- Found in src/Staking.sol [Line: 7](src/Staking.sol#L7)

	```solidity
	contract Staking {
	```

</details>



# Low Issues

## L-1: Centralization Risk for trusted owners

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>29 Found Instances</summary>


- Found in src/Distribution.sol [Line: 70](src/Distribution.sol#L70)

	```solidity
	    function setVSkillUser(address _vSkillUser) public onlyOwner {
	```

- Found in src/Relayer.sol [Line: 12](src/Relayer.sol#L12)

	```solidity
	contract Relayer is ILogAutomation, Ownable {
	```

- Found in src/Relayer.sol [Line: 85](src/Relayer.sol#L85)

	```solidity
	    function setForwarder(address forwarder) external onlyOwner {
	```

- Found in src/Relayer.sol [Line: 158](src/Relayer.sol#L158)

	```solidity
	    function assignEvidenceToVerifiers() external onlyOwner {
	```

- Found in src/Relayer.sol [Line: 204](src/Relayer.sol#L204)

	```solidity
	    function processEvidenceStatus(uint256 batchNumber) external onlyOwner {
	```

- Found in src/Relayer.sol [Line: 234](src/Relayer.sol#L234)

	```solidity
	    ) external onlyOwner {
	```

- Found in src/Relayer.sol [Line: 250](src/Relayer.sol#L250)

	```solidity
	    function mintUserNfts(uint256 batchNumber) public onlyOwner {
	```

- Found in src/Relayer.sol [Line: 280](src/Relayer.sol#L280)

	```solidity
	    function rewardOrPenalizeVerifiers(uint256 batchNumber) public onlyOwner {
	```

- Found in src/Relayer.sol [Line: 306](src/Relayer.sol#L306)

	```solidity
	    ) external onlyOwner {
	```

- Found in src/Relayer.sol [Line: 316](src/Relayer.sol#L316)

	```solidity
	        onlyOwner
	```

- Found in src/VSkillUser.sol [Line: 12](src/VSkillUser.sol#L12)

	```solidity
	contract VSkillUser is Ownable {
	```

- Found in src/VSkillUser.sol [Line: 117](src/VSkillUser.sol#L117)

	```solidity
	    ) external onlyOwner onlyNotInitialized {
	```

- Found in src/VSkillUser.sol [Line: 263](src/VSkillUser.sol#L263)

	```solidity
	    ) public onlyOwner onlyInitialized {
	```

- Found in src/VSkillUser.sol [Line: 268](src/VSkillUser.sol#L268)

	```solidity
	    function withdrawProfit() external onlyOwner onlyInitialized {
	```

- Found in src/VSkillUserNft.sol [Line: 9](src/VSkillUserNft.sol#L9)

	```solidity
	contract VSkillUserNft is ERC721, AccessControl {
	```

- Found in src/VSkillUserNft.sol [Line: 91](src/VSkillUserNft.sol#L91)

	```solidity
	    ) external onlyRole(DEFAULT_ADMIN_ROLE) onlyNotInitialized {
	```

- Found in src/VSkillUserNft.sol [Line: 115](src/VSkillUserNft.sol#L115)

	```solidity
	    ) public onlyRole(MINTER_ROLE) onlyInitialized {
	```

- Found in src/VSkillUserNft.sol [Line: 160](src/VSkillUserNft.sol#L160)

	```solidity
	    ) public onlyRole(MINTER_ROLE) onlyInitialized {
	```

- Found in src/Verifier.sol [Line: 10](src/Verifier.sol#L10)

	```solidity
	contract Verifier is Staking, Ownable {
	```

- Found in src/Verifier.sol [Line: 109](src/Verifier.sol#L109)

	```solidity
	    ) external onlyOwner onlyNotInitialized {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 14](src/optimizedGas/RelayerYul.sol#L14)

	```solidity
	contract RelayerYul is ILogAutomation, Ownable {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 87](src/optimizedGas/RelayerYul.sol#L87)

	```solidity
	    function setForwarder(address forwarder) external onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 159](src/optimizedGas/RelayerYul.sol#L159)

	```solidity
	    function assignEvidenceToVerifiers() external onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 274](src/optimizedGas/RelayerYul.sol#L274)

	```solidity
	    function processEvidenceStatus(uint256 batchNumber) external onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 304](src/optimizedGas/RelayerYul.sol#L304)

	```solidity
	    ) external onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 320](src/optimizedGas/RelayerYul.sol#L320)

	```solidity
	    function mintUserNfts(uint256 batchNumber) public onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 350](src/optimizedGas/RelayerYul.sol#L350)

	```solidity
	    function rewardOrPenalizeVerifiers(uint256 batchNumber) public onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 376](src/optimizedGas/RelayerYul.sol#L376)

	```solidity
	    ) external onlyOwner {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 386](src/optimizedGas/RelayerYul.sol#L386)

	```solidity
	        onlyOwner
	```

</details>



## L-2: Missing checks for `address(0)` when assigning values to address state variables

Check for `address(0)` when assigning values to address state variables.

<details><summary>5 Found Instances</summary>


- Found in src/Relayer.sol [Line: 86](src/Relayer.sol#L86)

	```solidity
	        s_forwarder = forwarder;
	```

- Found in src/VSkillUser.sol [Line: 119](src/VSkillUser.sol#L119)

	```solidity
	        i_relayer = _relayer;
	```

- Found in src/VSkillUserNft.sol [Line: 93](src/VSkillUserNft.sol#L93)

	```solidity
	        i_relayer = _relayer;
	```

- Found in src/Verifier.sol [Line: 111](src/Verifier.sol#L111)

	```solidity
	        i_relayer = _relayer;
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 88](src/optimizedGas/RelayerYul.sol#L88)

	```solidity
	        s_forwarder = forwarder;
	```

</details>



## L-3: `public` functions not used internally could be marked `external`

Instead of marking a function as `public`, consider marking it as `external` if it is not used internally.

<details><summary>45 Found Instances</summary>


- Found in src/Distribution.sol [Line: 70](src/Distribution.sol#L70)

	```solidity
	    function setVSkillUser(address _vSkillUser) public onlyOwner {
	```

- Found in src/Distribution.sol [Line: 84](src/Distribution.sol#L84)

	```solidity
	    function distributionRandomNumberForVerifiers()
	```

- Found in src/Distribution.sol [Line: 126](src/Distribution.sol#L126)

	```solidity
	    function getSubscriptionId() public view returns (uint256) {
	```

- Found in src/Distribution.sol [Line: 130](src/Distribution.sol#L130)

	```solidity
	    function getKeyHash() public view returns (bytes32) {
	```

- Found in src/Distribution.sol [Line: 134](src/Distribution.sol#L134)

	```solidity
	    function getCallbackGasLimit() public view returns (uint32) {
	```

- Found in src/Distribution.sol [Line: 138](src/Distribution.sol#L138)

	```solidity
	    function getRequestConfirmations() public pure returns (uint16) {
	```

- Found in src/Distribution.sol [Line: 142](src/Distribution.sol#L142)

	```solidity
	    function getNumWords() public pure returns (uint32) {
	```

- Found in src/Distribution.sol [Line: 146](src/Distribution.sol#L146)

	```solidity
	    function getRandomWords(
	```

- Found in src/Distribution.sol [Line: 152](src/Distribution.sol#L152)

	```solidity
	    function getVSkillUser() public view returns (address) {
	```

- Found in src/Distribution.sol [Line: 156](src/Distribution.sol#L156)

	```solidity
	    function getVrfCoordinator() public view returns (address) {
	```

- Found in src/Staking.sol [Line: 114](src/Staking.sol#L114)

	```solidity
	    function getStakeEthAmount() public pure returns (uint256) {
	```

- Found in src/VSkillUser.sol [Line: 135](src/VSkillUser.sol#L135)

	```solidity
	    function submitEvidence(
	```

- Found in src/VSkillUser.sol [Line: 190](src/VSkillUser.sol#L190)

	```solidity
	    function approveEvidenceStatus(
	```

- Found in src/VSkillUser.sol [Line: 215](src/VSkillUser.sol#L215)

	```solidity
	    function setDeadline(
	```

- Found in src/VSkillUser.sol [Line: 222](src/VSkillUser.sol#L222)

	```solidity
	    function setEvidenceStatus(
	```

- Found in src/VSkillUser.sol [Line: 229](src/VSkillUser.sol#L229)

	```solidity
	    function transferBonusToVerifierContract(
	```

- Found in src/VSkillUser.sol [Line: 261](src/VSkillUser.sol#L261)

	```solidity
	    function changeSubmissionFee(
	```

- Found in src/VSkillUser.sol [Line: 350](src/VSkillUser.sol#L350)

	```solidity
	    function getFeedbackOfEvidence(
	```

- Found in src/VSkillUser.sol [Line: 361](src/VSkillUser.sol#L361)

	```solidity
	    function getRequestIdToEvidence(
	```

- Found in src/VSkillUser.sol [Line: 367](src/VSkillUser.sol#L367)

	```solidity
	    function getRequestIdToEvidenceStatus(
	```

- Found in src/VSkillUser.sol [Line: 373](src/VSkillUser.sol#L373)

	```solidity
	    function getRequestIdToDeadline(
	```

- Found in src/VSkillUser.sol [Line: 379](src/VSkillUser.sol#L379)

	```solidity
	    function getRequestIdToEvidenceSkillDomain(
	```

- Found in src/VSkillUser.sol [Line: 385](src/VSkillUser.sol#L385)

	```solidity
	    function getRequestIdToVerifiersApprovedEvidence(
	```

- Found in src/VSkillUser.sol [Line: 391](src/VSkillUser.sol#L391)

	```solidity
	    function getRequestIdToVerifiersApprovedEvidenceLength(
	```

- Found in src/VSkillUser.sol [Line: 397](src/VSkillUser.sol#L397)

	```solidity
	    function getDistributionContractAddress() public view returns (address) {
	```

- Found in src/VSkillUser.sol [Line: 401](src/VSkillUser.sol#L401)

	```solidity
	    function getBonus() public view returns (uint256) {
	```

- Found in src/VSkillUser.sol [Line: 405](src/VSkillUser.sol#L405)

	```solidity
	    function getBonusWeight() public pure returns (uint256) {
	```

- Found in src/VSkillUser.sol [Line: 409](src/VSkillUser.sol#L409)

	```solidity
	    function getTotalWeight() public pure returns (uint256) {
	```

- Found in src/VSkillUser.sol [Line: 413](src/VSkillUser.sol#L413)

	```solidity
	    function getSubmissionFeeInEth() public view returns (uint256) {
	```

- Found in src/VSkillUserNft.sol [Line: 102](src/VSkillUserNft.sol#L102)

	```solidity
	    function supportsInterface(
	```

- Found in src/VSkillUserNft.sol [Line: 112](src/VSkillUserNft.sol#L112)

	```solidity
	    function mintUserNft(
	```

- Found in src/VSkillUserNft.sol [Line: 127](src/VSkillUserNft.sol#L127)

	```solidity
	    function tokenURI(
	```

- Found in src/VSkillUserNft.sol [Line: 157](src/VSkillUserNft.sol#L157)

	```solidity
	    function addMoreSkillsForNft(
	```

- Found in src/Verifier.sol [Line: 121](src/Verifier.sol#L121)

	```solidity
	    function provideFeedback(
	```

- Found in src/Verifier.sol [Line: 153](src/Verifier.sol#L153)

	```solidity
	    function addSkillDomain(
	```

- Found in src/Verifier.sol [Line: 180](src/Verifier.sol#L180)

	```solidity
	    function stake() public payable override onlyInitialized {
	```

- Found in src/Verifier.sol [Line: 184](src/Verifier.sol#L184)

	```solidity
	    function withdrawStakeAndLoseVerifier() public onlyInitialized {
	```

- Found in src/Verifier.sol [Line: 191](src/Verifier.sol#L191)

	```solidity
	    function withdrawReward() public onlyInitialized {
	```

- Found in src/Verifier.sol [Line: 207](src/Verifier.sol#L207)

	```solidity
	    function setVerifierAssignedRequestIds(
	```

- Found in src/Verifier.sol [Line: 230](src/Verifier.sol#L230)

	```solidity
	    function rewardVerifier(
	```

- Found in src/Verifier.sol [Line: 264](src/Verifier.sol#L264)

	```solidity
	    function penalizeVerifier(
	```

- Found in src/Verifier.sol [Line: 281](src/Verifier.sol#L281)

	```solidity
	    function addVerifierUnhandledRequestCount(
	```

- Found in src/Verifier.sol [Line: 287](src/Verifier.sol#L287)

	```solidity
	    function addReward(uint256 reward) public onlyInitialized onlyRelayer {
	```

- Found in src/library/OracleLib.sol [Line: 14](src/library/OracleLib.sol#L14)

	```solidity
	    function staleCheckLatestRoundData(
	```

- Found in src/library/OracleLib.sol [Line: 34](src/library/OracleLib.sol#L34)

	```solidity
	    function getTimeout(
	```

</details>



## L-4: Event is missing `indexed` fields

Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details><summary>11 Found Instances</summary>


- Found in src/Relayer.sol [Line: 54](src/Relayer.sol#L54)

	```solidity
	    event Relayer__ForwarderSet(address forwarder);
	```

- Found in src/Staking.sol [Line: 33](src/Staking.sol#L33)

	```solidity
	    event Withdrawn(address indexed staker, uint256 amount);
	```

- Found in src/VSkillUser.sol [Line: 68](src/VSkillUser.sol#L68)

	```solidity
	    event VSkillUser__SubmissionFeeChanged(uint256 newFeeInUsd);
	```

- Found in src/VSkillUser.sol [Line: 69](src/VSkillUser.sol#L69)

	```solidity
	    event VSkillUser__SkillDomainAdded(string skillDomain);
	```

- Found in src/VSkillUser.sol [Line: 70](src/VSkillUser.sol#L70)

	```solidity
	    event VSkillUser__Initialized(address relayer);
	```

- Found in src/VSkillUser.sol [Line: 71](src/VSkillUser.sol#L71)

	```solidity
	    event VSkillUser__TransferBonus(uint256 bonus);
	```

- Found in src/Verifier.sol [Line: 53](src/Verifier.sol#L53)

	```solidity
	    event Verifier__VerifierRewarded(
	```

- Found in src/Verifier.sol [Line: 58](src/Verifier.sol#L58)

	```solidity
	    event Verifier__VerifierPenalized(
	```

- Found in src/Verifier.sol [Line: 64](src/Verifier.sol#L64)

	```solidity
	    event Verifier__RewardAdded(uint256 reward);
	```

- Found in src/interfaces/IRelayer.sol [Line: 26](src/interfaces/IRelayer.sol#L26)

	```solidity
	    event Relayer__ForwarderSet(address forwarder);
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 56](src/optimizedGas/RelayerYul.sol#L56)

	```solidity
	    event Relayer__ForwarderSet(address forwarder);
	```

</details>



## L-5: Modifiers invoked only once can be shoe-horned into the function



<details><summary>7 Found Instances</summary>


- Found in src/Distribution.sol [Line: 44](src/Distribution.sol#L44)

	```solidity
	    modifier onlyVSkillUser() {
	```

- Found in src/Relayer.sol [Line: 60](src/Relayer.sol#L60)

	```solidity
	    modifier onlyForwarder() {
	```

- Found in src/Staking.sol [Line: 48](src/Staking.sol#L48)

	```solidity
	    modifier onlyNonVerifier() {
	```

- Found in src/VSkillUser.sol [Line: 84](src/VSkillUser.sol#L84)

	```solidity
	    modifier onlyNotInitialized() {
	```

- Found in src/VSkillUserNft.sol [Line: 57](src/VSkillUserNft.sol#L57)

	```solidity
	    modifier onlyNotInitialized() {
	```

- Found in src/Verifier.sol [Line: 77](src/Verifier.sol#L77)

	```solidity
	    modifier onlyNotInitialized() {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 62](src/optimizedGas/RelayerYul.sol#L62)

	```solidity
	    modifier onlyForwarder() {
	```

</details>



## L-6: Unused Custom Error

it is recommended that the definition be removed when custom error is unused

<details><summary>4 Found Instances</summary>


- Found in src/VSkillUser.sol [Line: 22](src/VSkillUser.sol#L22)

	```solidity
	    error VSkillUser__EvidenceNotApprovedYet(
	```

- Found in src/VSkillUserNft.sol [Line: 31](src/VSkillUserNft.sol#L31)

	```solidity
	    error VSkillUserNft__NotSkillHandler();
	```

- Found in src/interfaces/IRelayer.sol [Line: 12](src/interfaces/IRelayer.sol#L12)

	```solidity
	    error Relayer__InvalidBatchNumber();
	```

- Found in src/interfaces/IRelayer.sol [Line: 13](src/interfaces/IRelayer.sol#L13)

	```solidity
	    error Relayer__OnlyForwarder();
	```

</details>



## L-7: Dead Code

Functions that are not used. Consider removing them.

<details><summary>1 Found Instances</summary>


- Found in src/Staking.sol [Line: 96](src/Staking.sol#L96)

	```solidity
	    function withdrawStake() internal onlyVerifier {
	```

</details>



## L-8: Costly operations inside loops.

Invoking `SSTORE`operations in loops may lead to Out-of-gas errors. Use a local variable to hold the loop computation result.

<details><summary>17 Found Instances</summary>


- Found in src/Relayer.sol [Line: 170](src/Relayer.sol#L170)

	```solidity
	        for (uint256 i = 0; i < length; i++) {
	```

- Found in src/Relayer.sol [Line: 180](src/Relayer.sol#L180)

	```solidity
	            for (uint8 j = 0; j < randomWordsWithinRange.length; j++) {
	```

- Found in src/Relayer.sol [Line: 255](src/Relayer.sol#L255)

	```solidity
	        for (uint256 i = 0; i < length; i++) {
	```

- Found in src/Relayer.sol [Line: 481](src/Relayer.sol#L481)

	```solidity
	        for (uint256 i = 0; i < NUM_WORDS; i++) {
	```

- Found in src/Relayer.sol [Line: 491](src/Relayer.sol#L491)

	```solidity
	        for (uint256 i = 0; i < NUM_WORDS; i++) {
	```

- Found in src/Relayer.sol [Line: 546](src/Relayer.sol#L546)

	```solidity
	        for (uint256 i = 0; i < verifiersAssigned.length; i++) {
	```

- Found in src/Relayer.sol [Line: 573](src/Relayer.sol#L573)

	```solidity
	            for (uint256 i = 0; i < verifiersApproved.length; i++) {
	```

- Found in src/Relayer.sol [Line: 584](src/Relayer.sol#L584)

	```solidity
	            for (uint256 i = 0; i < verifiersApproved.length; i++) {
	```

- Found in src/VSkillUser.sol [Line: 201](src/VSkillUser.sol#L201)

	```solidity
	        for (uint8 i = 0; i < evidence.statusApproveOrNot.length; i++) {
	```

- Found in src/VSkillUserNft.sol [Line: 78](src/VSkillUserNft.sol#L78)

	```solidity
	        for (uint256 i = 0; i < skillDomainLength; i++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 325](src/optimizedGas/RelayerYul.sol#L325)

	```solidity
	        for (uint256 i = 0; i < length; i++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 456](src/optimizedGas/RelayerYul.sol#L456)

	```solidity
	        for (uint8 j = 0; j < randomWordsWithinRange.length; j++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 653](src/optimizedGas/RelayerYul.sol#L653)

	```solidity
	        for (uint256 i = 0; i < NUM_WORDS; i++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 663](src/optimizedGas/RelayerYul.sol#L663)

	```solidity
	        for (uint256 i = 0; i < NUM_WORDS; i++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 718](src/optimizedGas/RelayerYul.sol#L718)

	```solidity
	        for (uint256 i = 0; i < verifiersAssigned.length; i++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 745](src/optimizedGas/RelayerYul.sol#L745)

	```solidity
	            for (uint256 i = 0; i < verifiersApproved.length; i++) {
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 756](src/optimizedGas/RelayerYul.sol#L756)

	```solidity
	            for (uint256 i = 0; i < verifiersApproved.length; i++) {
	```

</details>



## L-9: State variable changes but no event is emitted.

State variable changes in this function but no event is emitted.

<details><summary>7 Found Instances</summary>


- Found in src/VSkillUser.sol [Line: 126](src/VSkillUser.sol#L126)

	```solidity
	    receive() external payable {
	```

- Found in src/VSkillUser.sol [Line: 190](src/VSkillUser.sol#L190)

	```solidity
	    function approveEvidenceStatus(
	```

- Found in src/VSkillUser.sol [Line: 215](src/VSkillUser.sol#L215)

	```solidity
	    function setDeadline(
	```

- Found in src/VSkillUser.sol [Line: 222](src/VSkillUser.sol#L222)

	```solidity
	    function setEvidenceStatus(
	```

- Found in src/VSkillUserNft.sol [Line: 89](src/VSkillUserNft.sol#L89)

	```solidity
	    function initializeRelayer(
	```

- Found in src/Verifier.sol [Line: 207](src/Verifier.sol#L207)

	```solidity
	    function setVerifierAssignedRequestIds(
	```

- Found in src/Verifier.sol [Line: 281](src/Verifier.sol#L281)

	```solidity
	    function addVerifierUnhandledRequestCount(
	```

</details>



## L-10: State variable could be declared immutable

State variables that are should be declared immutable to save gas. Add the `immutable` attribute to state variables that are only changed in the constructor

<details><summary>2 Found Instances</summary>


- Found in src/Verifier.sol [Line: 39](src/Verifier.sol#L39)

	```solidity
	    string[] private s_skillDomains;
	```

- Found in src/optimizedGas/RelayerYul.sol [Line: 30](src/optimizedGas/RelayerYul.sol#L30)

	```solidity
	    uint256 private s_batchProcessed;
	```

</details>



